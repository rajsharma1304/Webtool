var smoke={smoketimeout:[],init:!1,zindex:1e3,i:0,bodyload:function(n){var t=document.createElement("div");t.setAttribute("id","smoke-out-"+n);t.className="smoke-base";t.style.zIndex=smoke.zindex;smoke.zindex++;document.body.appendChild(t)},newdialog:function(){var n=(new Date).getTime();return n=Math.random(1,99)+n,smoke.init?smoke.bodyload(n):smoke.listen(window,"load",function(){smoke.bodyload(n)}),n},forceload:function(){},build:function(n,t){smoke.i++;t.stack=smoke.i;n=n.replace(/\n/g,"<br />");n=n.replace(/\r/g,"<br />");var e="",r="OK",u="Cancel",o="",i="",f;t.type==="prompt"&&(e='<div class="dialog-prompt"><input id="dialog-input-'+t.newid+'" type="text" '+(t.params.value?'value="'+t.params.value+'"':"")+" /><\/div>");t.params.ok&&(r=t.params.ok);t.params.cancel&&(u=t.params.cancel);t.params.classname&&(o=t.params.classname);t.type!=="signal"&&(i='<div class="dialog-buttons">',t.type==="alert"?i+='<button class="btn" id="alert-ok-'+t.newid+'">'+r+"<\/button>":(t.type==="prompt"||t.type==="confirm")&&(i+=t.params.reverseButtons?'<button class="btn" id="'+t.type+"-ok-"+t.newid+'">'+r+'<\/button><button class="btn" id="'+t.type+"-cancel-"+t.newid+'" class="cancel">'+u+"<\/button>":'<button class="btn" id="'+t.type+"-cancel-"+t.newid+'" class="cancel">'+u+'<\/button><button class="btn" id="'+t.type+"-ok-"+t.newid+'">'+r+"<\/button>"),i+="<\/div>");f='<div id="smoke-bg-'+t.newid+'" class="smokebg"><\/div><div class="dialog smoke '+o+'"><div class="dialog-inner">'+n+e+i+"<\/div><\/div>";smoke.init?smoke.finishbuild(n,t,f):smoke.listen(window,"load",function(){smoke.finishbuild(n,t,f)})},finishbuild:function(n,t,i){var r=document.getElementById("smoke-out-"+t.newid);for(r.className="smoke-base smoke-visible  smoke-"+t.type,r.innerHTML=i;r.innerHTML==="";)r.innerHTML=i;smoke.smoketimeout[t.newid]&&clearTimeout(smoke.smoketimeout[t.newid]);switch(t.type){case"alert":smoke.finishbuildAlert(n,t,i);break;case"confirm":smoke.finishbuildConfirm(n,t,i);break;case"prompt":smoke.finishbuildPrompt(n,t,i);break;case"signal":smoke.finishbuildSignal(n,t,i);break;default:throw"Unknown type: "+t.type;}},finishbuildAlert:function(n,t){smoke.listen(document.getElementById("alert-ok-"+t.newid),"click",function(){smoke.destroy(t.type,t.newid);typeof t.callback!="undefined"&&t.callback()});document.onkeyup=function(n){n||(n=window.event);(n.keyCode===13||n.keyCode===32||n.keyCode===27)&&(smoke.destroy(t.type,t.newid),typeof t.callback!="undefined"&&t.callback())}},finishbuildConfirm:function(n,t){smoke.listen(document.getElementById("confirm-cancel-"+t.newid),"click",function(){smoke.destroy(t.type,t.newid);t.callback(!1)});smoke.listen(document.getElementById("confirm-ok-"+t.newid),"click",function(){smoke.destroy(t.type,t.newid);t.callback(!0)});document.onkeyup=function(n){n||(n=window.event);n.keyCode===13||n.keyCode===32?(smoke.destroy(t.type,t.newid),t.callback(!0)):n.keyCode===27&&(smoke.destroy(t.type,t.newid),t.callback(!1))}},finishbuildPrompt:function(n,t){var i=document.getElementById("dialog-input-"+t.newid);setTimeout(function(){i.focus();i.select()},100);smoke.listen(document.getElementById("prompt-cancel-"+t.newid),"click",function(){smoke.destroy(t.type,t.newid);t.callback(!1)});smoke.listen(document.getElementById("prompt-ok-"+t.newid),"click",function(){smoke.destroy(t.type,t.newid);t.callback(i.value)});document.onkeyup=function(n){n||(n=window.event);n.keyCode===13?(smoke.destroy(t.type,t.newid),t.callback(i.value)):n.keyCode===27&&(smoke.destroy(t.type,t.newid),t.callback(!1))}},finishbuildSignal:function(n,t){smoke.smoketimeout[t.newid]=setTimeout(function(){smoke.destroy(t.type,t.newid)},t.timeout)},destroy:function(n,t){var i=document.getElementById("smoke-out-"+t),r=document.getElementById(n+"-ok-"+t),u=document.getElementById(n+"-cancel-"+t);i.className="smoke-base";r&&(smoke.stoplistening(r,"click",function(){}),document.onkeyup=null);u&&smoke.stoplistening(u,"click",function(){});smoke.i=0;i.innerHTML="";i.parentNode&&i.parentNode.removeChild(i)},alert:function(n,t,i){typeof t!="object"&&(t=!1);var r=smoke.newdialog();smoke.build(n,{type:"alert",callback:i,params:t,newid:r})},signal:function(n,t){typeof t=="undefined"&&(t=5e3);var i=smoke.newdialog();smoke.build(n,{type:"signal",timeout:t,params:!1,newid:i})},confirm:function(n,t,i){typeof i!="object"&&(i=!1);var r=smoke.newdialog();smoke.build(n,{type:"confirm",callback:t,params:i,newid:r})},prompt:function(n,t,i){typeof i!="object"&&(i=!1);var r=smoke.newdialog();return smoke.build(n,{type:"prompt",callback:t,params:i,newid:r})},listen:function(n,t,i){return n.addEventListener?n.addEventListener(t,i,!1):n.attachEvent?n.attachEvent("on"+t,i):!1},stoplistening:function(n,t,i){return n.removeEventListener?n.removeEventListener("click",i,!1):n.detachEvent?n.detachEvent("on"+t,i):!1}};smoke.init||smoke.listen(window,"load",function(){smoke.init=!0});
/*
//# sourceMappingURL=smoke.min.js.map
*/